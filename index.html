<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>visualizing artwork</title>
    <style>
        body {
            background: #f1f4f9;
        }
    </style>
</head>
<body>
    <button>Play/pause</button>
    <canvas></canvas>
    <div>
        <h3>Song & artwork by</h3>
        <a href="http://www.industriesoftheblindmusic.com/">
        <img src="artwork.jpg" width="200" height="200" />
        <p>Industries of the Blind</p>
        <p>Chapter 1: Had We Known Better</p>
        </a>
    </div>

    <script src="bufferLoader.js"></script>
    <script src="visualizer.js"></script>
    <script>

        context = new (window.AudioContext || window.webkitAudioContext)();

        function loadSounds(obj, soundMap) {
            var names = [];
            var paths = [];
            for (var name in soundMap) {
                var path = soundMap[name];
                names.push(name);
                paths.push(path);
            }
            bufferLoader = new BufferLoader(context, paths, function(bufferList) {
                for (var i = 0; i < bufferList.length; i++) {
                    var buffer = bufferList[i];
                    var name = names[i];
                    obj[name] = buffer;
                }
            });
            bufferLoader.load();
        }

        var sample = new VisualizerSample();
        document.querySelector('button').addEventListener('click', function(){
            sample.togglePlayback();
        });
    </script>
</body>
</html>
